{"version":3,"sources":["../../../../../../assets/script/wx/savePhotos/assets/script/wx/savePhotos/saveOffical.js"],"names":["cc","Class","extends","Component","properties","start","node","active","saveOffical","sys","platform","WECHAT_GAME","wx","saveImageToPhotosAlbum","filePath","success","result","console","log","showModal","title","content","showCancel","res","fail","getSetting","authSetting","confirm","openSetting","closeEvent"],"mappings":";;;;;;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfQ,KAHP;;AAqBL;;AAEA;;AAEAC,SAzBK,mBAyBG;AACJ,aAAKC,IAAL,CAAUC,MAAV,GAAmB,IAAnB;AACH,KA3BI;AA6BLC,eA7BK,yBA6BS;AACV,YAAGR,GAAGS,GAAH,CAAOC,QAAP,IAAmBV,GAAGS,GAAH,CAAOE,WAA7B,EAAyC;AACrCC,eAAGC,sBAAH,CAA0B;AACtBC,0BAAU,wDADY;AAEtBC,uBAFsB,mBAEdC,MAFc,EAEN;AACZC,4BAAQC,GAAR,CAAY,SAAZ;AACAD,4BAAQC,GAAR,CAAYF,MAAZ;AACAJ,uBAAGO,SAAH,CAAa;AACTC,+BAAO,UADE;AAETC,iCAAS,4CAFA;AAGTC,oCAAY,KAHH;AAITP,iCAAS,iBAAUQ,GAAV,EAAe,CACvB;AALQ,qBAAb;AAOH,iBAZqB;AAYnBC,oBAZmB,gBAYdR,MAZc,EAYN;AACZC,4BAAQC,GAAR,CAAYF,MAAZ;AACAJ,uBAAGa,UAAH,CAAc;AACVV,+BADU,mBACFQ,GADE,EACG;AACT,gCAAI,CAACA,IAAIG,WAAJ,CAAgB,wBAAhB,CAAL,EAAgD;AAC5Cd,mCAAGO,SAAH,CAAa;AACTC,2CAAO,MADE;AAETC,6CAAS,aAFA;AAGTN,6CAAS,iBAAUQ,GAAV,EAAe;AACpB,4CAAIA,IAAII,OAAR,EAAiB;AACbf,+CAAGgB,WAAH,CAAe,EAAf;AAEH;AACJ;AARQ,iCAAb;AAUH,6BAXD,MAWK;AACD;AACAhB,mCAAGO,SAAH,CAAa;AACTC,2CAAO,MADE;AAETE,gDAAY,KAFH;AAGTP,6CAAS,iBAAUQ,GAAV,EAAe,CACvB;AAJQ,iCAAb;AAMH;AACJ;AAtBS,qBAAd;AAwBH;AAtCqB,aAA1B;AAwCH;AACJ,KAxEI;AAyELM,cAzEK,wBAyEQ;AACT,aAAKvB,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACH;;AAED;;AA7EK,CAAT","file":"saveOffical.js","sourceRoot":"../../../../../../assets/script/wx/savePhotos","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n        this.node.active = true;\r\n    },\r\n\r\n    saveOffical() {\r\n        if(cc.sys.platform == cc.sys.WECHAT_GAME){\r\n            wx.saveImageToPhotosAlbum({\r\n                filePath: 'res/raw-assets/resources/wx/savePhotos/res/offical.png',\r\n                success(result) {\r\n                    console.log(\"success\");\r\n                    console.log(result)\r\n                    wx.showModal({\r\n                        title: '怎么扫描二维码？',\r\n                        content: '图片保存相册后，点击微信中的扫一扫，然后点击右上角的相册，从相册中选取这张图片即可！',\r\n                        showCancel: false,\r\n                        success: function (res) {\r\n                        }\r\n                    });\r\n                }, fail(result) {\r\n                    console.log(result);\r\n                    wx.getSetting({\r\n                        success(res) {\r\n                            if (!res.authSetting['scope.writePhotosAlbum']) {\r\n                                wx.showModal({\r\n                                    title: '保存失败',\r\n                                    content: '是否打开保存相册权限？',\r\n                                    success: function (res) {\r\n                                        if (res.confirm) {\r\n                                            wx.openSetting({\r\n                                            })\r\n                                        }\r\n                                    }\r\n                                })\r\n                            }else{\r\n                                //保存失败\r\n                                wx.showModal({\r\n                                    title: '保存失败',\r\n                                    showCancel: false,\r\n                                    success: function (res) {\r\n                                    }\r\n                                });\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    },\r\n    closeEvent() {\r\n        this.node.active = false;\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}