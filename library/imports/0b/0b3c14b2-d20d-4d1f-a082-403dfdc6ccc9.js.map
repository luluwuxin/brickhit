{"version":3,"sources":["../../../../../../assets/script/wx/match/assets/script/wx/match/match.js"],"names":["urls","require","config","util","_hasMatch","getMatchInfo","callback","url","match","param","request","data","method","success","console","log","res","fail","enterMatch","queryMyMatch","obj","matchId","getCurMatchMoney","getAllMoney","hasMatch","setHasMatch","bool","module","exports"],"mappings":";;;;;;AAAA,IAAIA,OAAOC,QAAQ,QAAR,EAAkBD,IAA7B;AACA,IAAIE,SAASD,QAAQ,QAAR,CAAb;AACA,IAAIE,OAAOF,QAAQ,eAAR,CAAX;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA,IAAIG,YAAY,KAAhB;;AAEA,IAAMC,eAAe,SAAfA,YAAe,CAASC,QAAT,EAAmB;AACpC,QAAIC,MAAMP,KAAKQ,KAAL,GAAa,eAAvB;AACA,QAAIC,QAAQ,EAAZ;AACAN,SAAKO,OAAL,CAAa;AACTH,aAAKA,GADI;AAETI,cAAMF,KAFG;AAGTG,gBAAQ,MAHC;AAITC,iBAAS,sBAAO;AACZC,oBAAQC,GAAR,CAAY,yBAAZ,EAAuCC,GAAvC;AACA,gBAAIV,YAAY,OAAOA,QAAP,IAAmB,UAAnC,EAA+C;AAC3CA,yBAASU,IAAIL,IAAb;AACH;AACJ,SATQ;AAUTM,cAAM,mBAAO;AACTH,oBAAQC,GAAR,CAAY,uBAAZ;AACH;AAZQ,KAAb;AAcH,CAjBD;;AAmBA,IAAMG,aAAa,SAAbA,UAAa,CAASZ,QAAT,EAAmB;AAClC,QAAIC,MAAMP,KAAKQ,KAAL,GAAa,aAAvB;AACA,QAAIC,QAAQ,EAAZ;AACAN,SAAKO,OAAL,CAAa;AACTH,aAAKA,GADI;AAETI,cAAMF,KAFG;AAGTG,gBAAQ,MAHC;AAITC,iBAAS,sBAAO;AACZC,oBAAQC,GAAR,CAAY,2BAAZ,EAAyCC,GAAzC;AACA,gBAAIV,YAAY,OAAOA,QAAP,IAAmB,UAAnC,EAA+C;AAC3CA,yBAASU,IAAIL,IAAb;AACH;AACJ,SATQ;AAUTM,cAAM,mBAAO;AACTH,oBAAQC,GAAR,CAAY,0BAAZ,EAAwCC,GAAxC;AACH;AAZQ,KAAb;AAcH,CAjBD;;AAmBA,IAAMG,eAAe,SAAfA,YAAe,CAASC,GAAT,EAAc;AAC/B,QAAIb,MAAMP,KAAKQ,KAAL,GAAa,eAAvB;AACA,QAAIC,QAAQ;AACRY,iBAASD,IAAIC;AADL,KAAZ;AAGAlB,SAAKO,OAAL,CAAa;AACTH,aAAKA,GADI;AAETI,cAAMF,KAFG;AAGTG,gBAAQ,MAHC;AAITC,iBAAS,sBAAO;AACZC,oBAAQC,GAAR,CAAY,2BAAZ,EAAyCC,GAAzC;AACA,gBAAII,IAAIP,OAAJ,IAAe,OAAOO,IAAIP,OAAX,IAAsB,UAAzC,EAAqD;AACjDO,oBAAIP,OAAJ,CAAYG,IAAIL,IAAhB;AACH;AACJ,SATQ;AAUTM,cAAM,mBAAO;AACTH,oBAAQC,GAAR,CAAY,0BAAZ,EAAwCC,GAAxC;AACA,gBAAII,IAAIH,IAAJ,IAAY,OAAOG,IAAIH,IAAX,IAAmB,UAAnC,EAA+C;AAC3CG,oBAAIH,IAAJ,CAASD,IAAIL,IAAb;AACH;AACJ;AAfQ,KAAb;AAiBH,CAtBD;;AAwBA,IAAMW,mBAAmB,SAAnBA,gBAAmB,CAASF,GAAT,EAAc;AACnC,QAAIb,MAAMP,KAAKQ,KAAL,GAAa,mBAAvB;AACA,QAAIC,QAAQ;AACRY,iBAASD,IAAIC;AADL,KAAZ;AAGAlB,SAAKO,OAAL,CAAa;AACTH,aAAKA,GADI;AAETI,cAAMF,KAFG;AAGTG,gBAAQ,MAHC;AAITC,iBAAS,sBAAO;AACZC,oBAAQC,GAAR,CAAY,mCAAZ,EAAiDC,GAAjD;AACA,gBAAII,IAAIP,OAAJ,IAAe,OAAOO,IAAIP,OAAX,IAAsB,UAAzC,EAAqD;AACjDO,oBAAIP,OAAJ,CAAYG,IAAIL,IAAhB;AACH;AACJ,SATQ;AAUTM,cAAM,mBAAO;AACTH,oBAAQC,GAAR,CAAY,kCAAZ,EAAgDC,GAAhD;AACA,gBAAII,IAAIH,IAAJ,IAAY,OAAOG,IAAIH,IAAX,IAAmB,UAAnC,EAA+C;AAC3CG,oBAAIH,IAAJ,CAASD,IAAIL,IAAb;AACH;AACJ;AAfQ,KAAb;AAiBH,CAtBD;;AAwBA,IAAMY,cAAc,SAAdA,WAAc,CAASjB,QAAT,EAAmB;AACnC,QAAIC,MAAMP,KAAKQ,KAAL,GAAa,cAAvB;AACA,QAAIC,QAAQ,EAAZ;AACAN,SAAKO,OAAL,CAAa;AACTH,aAAKA,GADI;AAETI,cAAMF,KAFG;AAGTG,gBAAQ,MAHC;AAITC,iBAAS,sBAAO;AACZC,oBAAQC,GAAR,CAAY,6BAAZ,EAA2CC,GAA3C;AACA,gBAAIV,YAAY,OAAOA,QAAP,IAAmB,UAAnC,EAA+C;AAC3CA,yBAASU,IAAIL,IAAb;AACH;AACJ,SATQ;AAUTM,cAAM,mBAAO;AACTH,oBAAQC,GAAR,CAAY,4BAAZ,EAA0CC,GAA1C;AACH;AAZQ,KAAb;AAcH,CAjBD;;AAmBA,IAAMQ,WAAW,SAAXA,QAAW,GAAW;AACxB,WAAOpB,SAAP;AACH,CAFD;;AAIA,IAAMqB,cAAc,SAAdA,WAAc,CAASC,IAAT,EAAe;AAC/BtB,gBAAYsB,IAAZ;AACH,CAFD;;AAIAC,OAAOC,OAAP,GAAiB;AACbvB,kBAAcA,YADD;AAEba,gBAAYA,UAFC;AAGbC,kBAAcA,YAHD;AAIbG,sBAAkBA,gBAJL;AAKbC,iBAAaA,WALA;AAMbC,cAAUA,QANG;AAObC,iBAAaA;AAPA,CAAjB","file":"match.js","sourceRoot":"../../../../../../assets/script/wx/match","sourcesContent":["var urls = require('config').urls\r\nvar config = require('config')\r\nvar util = require('../utils/util')\r\n// var matchManager = require('matchManager').getInstance()\r\n\r\n// var self = null;\r\n/*\r\nexport default class match {\r\n    constructor() {\r\n        // self = this;\r\n    };\r\n\r\n    getMatchInfo = function(callback) {\r\n        var url = urls.match + \"/getmatchinfo\";\r\n        var param = {};\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'POST',\r\n            success: res => {\r\n                if (callback && typeof callback == 'function') {\r\n                    console.log('get match info success:', res);\r\n                    callback(res.data);\r\n                }\r\n            },\r\n            fail: res => {\r\n                console.log('get match info failed');\r\n            },\r\n        });\r\n    };\r\n\r\n    enterMatch = function(callback) {\r\n        var url = urls.match + \"/entermatch\";\r\n        var param = {};\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'POST',\r\n            success: res => {\r\n                console.log('enter match success, res:', res);\r\n                if (callback && typeof callback == 'function') {\r\n                    callback(res.data);\r\n                }\r\n            },\r\n            fail: res => {\r\n                console.log('enter match failed, res:', res);\r\n            },\r\n        });\r\n    };\r\n\r\n    queryMyMatch = function(obj) {\r\n        var url = urls.match + \"/querymymatch\";\r\n        var param = {\r\n            matchID: obj.matchID\r\n        };\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'POST',\r\n            success: res => {\r\n                console.log('query match success, res:', res);\r\n                if (obj.success && typeof obj.success == 'function') {\r\n                    obj.success(res.data);\r\n                }\r\n            },\r\n            fail: res => {\r\n                console.log('query match failed, res:', res);\r\n                if (obj.fail && typeof obj.fail == 'function') {\r\n                    obj.fail(res.data);\r\n                }\r\n            },\r\n        });\r\n    };\r\n\r\n    getMoney = function() {\r\n\r\n    };\r\n\r\n    update = function() {\r\n        // 判断是否从群分享的卡片进来, 是的话就不向服务器请求match信息\r\n        if (matchManager.checkEnter()) {\r\n            console.log('got match info from LaunchOption');\r\n            return;\r\n        }\r\n\r\n        console.log('getting match info from server .....');\r\n        // 主动向服务器获取match信息\r\n        this.getMatchInfo(function(data) {\r\n            // 200 为拿到比赛数据\r\n            if (!!data.code && data.code == 201) {\r\n                console.log('no match now');\r\n            } else {\r\n                // 拿到活动，游戏界面显示红包icon\r\n                matchManager.showMatchHongbaoIcon(data);\r\n            }\r\n        });\r\n    };\r\n\r\n    hasMatch = function() {\r\n        return true;\r\n    };\r\n\r\n    isInMatch = function() {\r\n\r\n    };\r\n}*/\r\nvar _hasMatch = false;\r\n\r\nconst getMatchInfo = function(callback) {\r\n    var url = urls.match + \"/getmatchinfo\";\r\n    var param = {};\r\n    util.request({\r\n        url: url,\r\n        data: param,\r\n        method: 'POST',\r\n        success: res => {\r\n            console.log('get match info success:', res);\r\n            if (callback && typeof callback == 'function') {\r\n                callback(res.data);\r\n            }\r\n        },\r\n        fail: res => {\r\n            console.log('get match info failed');\r\n        },\r\n    });\r\n};\r\n\r\nconst enterMatch = function(callback) {\r\n    var url = urls.match + \"/entermatch\";\r\n    var param = {};\r\n    util.request({\r\n        url: url,\r\n        data: param,\r\n        method: 'POST',\r\n        success: res => {\r\n            console.log('enter match success, res:', res);\r\n            if (callback && typeof callback == 'function') {\r\n                callback(res.data);\r\n            }\r\n        },\r\n        fail: res => {\r\n            console.log('enter match failed, res:', res);\r\n        },\r\n    });\r\n};\r\n\r\nconst queryMyMatch = function(obj) {\r\n    var url = urls.match + \"/querymymatch\";\r\n    var param = {\r\n        matchId: obj.matchId\r\n    };\r\n    util.request({\r\n        url: url,\r\n        data: param,\r\n        method: 'POST',\r\n        success: res => {\r\n            console.log('query match success, res:', res);\r\n            if (obj.success && typeof obj.success == 'function') {\r\n                obj.success(res.data);\r\n            }\r\n        },\r\n        fail: res => {\r\n            console.log('query match failed, res:', res);\r\n            if (obj.fail && typeof obj.fail == 'function') {\r\n                obj.fail(res.data);\r\n            }\r\n        },\r\n    });\r\n};\r\n\r\nconst getCurMatchMoney = function(obj) {\r\n    var url = urls.match + \"/getcurmatchmoney\";\r\n    var param = {\r\n        matchId: obj.matchId\r\n    };\r\n    util.request({\r\n        url: url,\r\n        data: param,\r\n        method: 'POST',\r\n        success: res => {\r\n            console.log('get cur match money success, res:', res);\r\n            if (obj.success && typeof obj.success == 'function') {\r\n                obj.success(res.data);\r\n            }\r\n        },\r\n        fail: res => {\r\n            console.log('get cur match money failed, res:', res);\r\n            if (obj.fail && typeof obj.fail == 'function') {\r\n                obj.fail(res.data);\r\n            }\r\n        },\r\n    });\r\n};\r\n\r\nconst getAllMoney = function(callback) {\r\n    var url = urls.match + \"/getallmoney\";\r\n    var param = {};\r\n    util.request({\r\n        url: url,\r\n        data: param,\r\n        method: 'POST',\r\n        success: res => {\r\n            console.log('get all money success, res:', res);\r\n            if (callback && typeof callback == 'function') {\r\n                callback(res.data);\r\n            }\r\n        },\r\n        fail: res => {\r\n            console.log('get all money failed, res:', res);\r\n        },\r\n    });\r\n};\r\n\r\nconst hasMatch = function() {\r\n    return _hasMatch;\r\n};\r\n\r\nconst setHasMatch = function(bool) {\r\n    _hasMatch = bool;\r\n};\r\n\r\nmodule.exports = {\r\n    getMatchInfo: getMatchInfo,\r\n    enterMatch: enterMatch,\r\n    queryMyMatch: queryMyMatch,\r\n    getCurMatchMoney: getCurMatchMoney,\r\n    getAllMoney: getAllMoney,\r\n    hasMatch: hasMatch,\r\n    setHasMatch: setHasMatch\r\n}\r\n"]}