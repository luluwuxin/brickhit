{"version":3,"sources":["../../../../../assets/scripts/common/assets/scripts/common/Common.js"],"names":["window","identifier","Hex2rgb","xs","hex","length","x","parseInt","slice","concat","map","f","arr","compose","fbc","fab","a","head","tail","sum","s","undefined","square","sqrt","Math","self","normalizev","v","console","log","sumi","sqrtSquareSum","normalize","getIdentifier","_flyText","parentNode","str","textNode","cc","Node","addComponent","Label","LabelOutline","text","getComponent","string","fontSize","lineHeight","color","textOutLine","width","addChild","size","getContentSize","fadeOut","move","moveBy","p","runAction","sequence","delayTime","spawn","callFunc","destroy","getStorageSync","key","data","sys","localStorage","getItem","JSON","parse","setStorageSync","value","setItem","stringify","rgb2hsv","rgb","r","g","b","max","min","h","delta","hsv2rgb","hsv","i","floor","q","t","domainSize","rnormalize","hex2RGB","wxBversionLess","vs","platform","WECHAT_GAME","bVersion","wx","getSystemInfoSync","SDKVersion","vs2vn","split","join","playAd","func1","func2","flashAd","videoAd","createRewardedVideoAd","adUnitId","callBack","offClose","load","then","onClose","show","catch","err","errMsg","module","exports"],"mappings":"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","file":"Common.js","sourceRoot":"../../../../../assets/scripts/common","sourcesContent":["import { version } from \"punycode\";\r\n\r\n// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\n/* \r\n * \r\n */\r\nwindow.identifier = 1;\r\nvar Hex2rgb = function (xs, hex) {\r\n\tif (hex.length < 2) return xs;\r\n\tlet x = parseInt(\"0x\" + hex.slice(0, 2));\r\n\treturn Hex2rgb(xs.concat(x), hex.slice(2));\r\n};\r\n//Funcotr f :: (a -> b) -> [a] -> [b] \r\nvar map = (f, arr) => arr.map(f);\r\n//compose :: (b -> c) -> (a -> b) -> (a -> c)\r\nvar compose = (fbc, fab) => ((a) => fbc(fab(a)));\r\n//head:: [a] -> a\r\nvar head = (arr) => arr.slice(0, 1)[0];\r\n//tail:: [a] -> [a]\r\nvar tail = (arr) => arr.slice(1);\r\n//sum:: Number -> [Number] -> Number\r\nvar sum = (s, arr) => head(arr) == undefined ? s : sum(s + head(arr), tail(arr));\r\n//var sum = (s, arr) => {console.log(head(arr), tail(arr)); return head(arr) == undefined ? s : sum(s + head(arr), tail(arr));}\r\n//square :: Number -> Number\r\nvar square = (x) => x * x;\r\nconst sqrt = Math.sqrt;\r\nlet self = {\r\n    //规格化\r\n    //normalize:: [Number] -> [Number] \r\n    normalizev: (v) =>{\r\n\t\tif(!v){console.log(\"error \", v,);return;}\r\n\t\t//sumi:: [Number] -> Number\r\n\t\tvar sumi = (arr) => sum(0, arr);\r\n\t\t//sqrtSquareSum:: [Number] -> Number;\r\n\t\t//var squareSum = compose(sumi, (arr)=>map(square, arr));\r\n\t\tvar sqrtSquareSum = compose(sqrt, compose(sumi, (arr)=>map(square, arr)));\r\n\t\t//return map((x) => x / sqrtSquareSum(v), v);\r\n\t\treturn map((x)=>self.normalize(sqrtSquareSum(v), x), v);\r\n\t},\r\n\t//\r\n\tgetIdentifier:()=>{\r\n\t\tif(window.identifier) return window.identifier++;\r\n\t\treturn window.identifier = 1;\r\n\t},\r\n\t_flyText: function (parentNode, str) {\r\n\t\tvar textNode = new cc.Node;\r\n\t\ttextNode.addComponent(cc.Label);\r\n\t\ttextNode.addComponent(cc.LabelOutline);\r\n\t\tvar text = textNode.getComponent(cc.Label);\r\n\t\ttext.string = str;\r\n\t\ttext.fontSize = 32;\r\n\t\ttext.lineHeight = 32;\r\n\t\ttextNode.color = cc.color(255, 255, 255, 255);\r\n\t\tvar textOutLine = textNode.getComponent(cc.LabelOutline);\r\n\t\ttextOutLine.color = cc.color(63, 2, 2, 255);\r\n\t\ttextOutLine.width = 2;\r\n\t\tparentNode.addChild(textNode);\r\n\t\tvar size = parentNode.getContentSize();\r\n\t\t//textNode.setPosition(size.width/2,size.height);\r\n\t\tvar fadeOut = cc.fadeOut(0.2);\r\n\t\tvar move = cc.moveBy(0.2, cc.p(0, 200));\r\n\t\ttextNode.runAction(cc.sequence(cc.delayTime(0.3), cc.spawn(fadeOut, move), cc.callFunc(function () {\r\n\t\t\ttextNode.destroy();\r\n\t\t}, parentNode)))\r\n\t},\r\n\tgetStorageSync: function (key) {\r\n\t\t//if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n\t\t//    let data = wx.getStorageSync(key)\r\n\t\t//    if(data) return JSON.parse(data);\r\n\t\t//}\r\n\t\tlet data = cc.sys.localStorage.getItem(key);\r\n\t\tif (data) return JSON.parse(data);\r\n\r\n\t},\r\n\tsetStorageSync: function (key, value) {\r\n\t\t//if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n\t\t//    return wx.setStorageSync(key, JSON.stringify(value));\r\n\t\t//}\r\n\t\t//console.log(value, JSON.stringify(value))\r\n\t\tcc.sys.localStorage.setItem(key, JSON.stringify(value));\r\n\t},\r\n\trgb2hsv: function (rgb) {\r\n\t\tlet r = rgb[0], g = rgb[1], b = rgb[2];\r\n\t\tlet max = Math.max(r, g, b);\r\n\t\tlet min = Math.min(r, g, b);\r\n\t\tlet h = 0.0;\r\n\t\tlet s = 0.0;\r\n\t\tlet v = max;\r\n\t\tlet delta = max - min;\r\n\t\tif (max > 0.0)\r\n\t\t\ts = delta / max;\r\n\t\telse {\r\n\t\t\t//r == g == b == 0.0;\r\n\t\t\ts = 0.0;\r\n\t\t\th = -1.0;\r\n\t\t\treturn [h, s, v];\r\n\t\t}\r\n\t\tif (r == max) h = (g - b) / delta;  // between yellow & magenta\r\n\t\telse if (g == max)\r\n\t\t\th = 2.0 + (b - r) / delta;      // between cyan & yellow\r\n\t\telse\r\n\t\t\th = 4 + (r - g) / delta;      // between magenta & cyan\r\n\t\th *= 60.0;      // degrees\r\n\t\tif (h < 0.0)\r\n\t\t\th += 360.0;\r\n\t\treturn [h, s, v];\r\n\t},\r\n\thsv2rgb: function (hsv) {\r\n\t\tlet h = hsv[0], s = hsv[1], v = hsv[2];\r\n\t\tlet r = 0.0, g = 0.0, b = 0.0;\r\n\t\tif (s <= 0.0) {\r\n\t\t\t// achromatic (grey)\r\n\t\t\tr = g = b = v;\r\n\t\t\treturn [r, g, b]\r\n\t\t}\r\n\t\th /= 60.0;            // sector 0 to 5\r\n\t\tlet i = Math.floor(h);\r\n\t\tlet f = h - i;          // factorial part of h\r\n\t\tlet p = v * (1 - s);\r\n\t\tlet q = v * (1 - s * f);\r\n\t\tlet t = v * (1 - s * (1 - f));\r\n\t\tswitch (i) {\r\n\t\t\tcase 0:\r\n\t\t\t\tr = v;\r\n\t\t\t\tg = t;\r\n\t\t\t\tb = p;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 1:\r\n\t\t\t\tr = q;\r\n\t\t\t\tg = v;\r\n\t\t\t\tb = p;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tr = p;\r\n\t\t\t\tg = v;\r\n\t\t\t\tb = t;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tr = p;\r\n\t\t\t\tg = q;\r\n\t\t\t\tb = v;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tr = t;\r\n\t\t\t\tg = p;\r\n\t\t\t\tb = v;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:        // case 5:\r\n\t\t\t\tr = v;\r\n\t\t\t\tg = p;\r\n\t\t\t\tb = q;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn [r, g, b];\r\n\t},\r\n\t//normalize :: Int -> Int -> Float;\r\n\tnormalize: function (domainSize, x) {\r\n\t\treturn x / domainSize;\r\n\t},\r\n\t//rnormalize :: Int -> Int -> Float;\r\n\trnormalize: function (domainSize, x) {\r\n\t\treturn x * domainSize;\r\n\t},\r\n\t//hex2rgb :: String -> [Int]\r\n\thex2RGB: (hex) => Hex2rgb([], hex),\r\n\r\n\r\n\twxBversionLess: (vs) => {\r\n\t\tif (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n\t\t\tlet bVersion = wx.getSystemInfoSync().SDKVersion;\r\n\t\t\tvar vs2vn = (vs) => {\r\n\t\t\t\treturn parseInt(vs.split(\".\").join(\"\").slice(0, 3));\r\n\t\t\t}\r\n\t\t\treturn vs2vn(bVersion) < vs2vn(vs);\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\t//@func1 success callBack\r\n\t//@func2 fail callBack\r\n\tplayAd: (func1, func2) => {\r\n\t\tif (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n\t\t\tif (!self.wxBversionLess(\"2.0.4\") && window.flashAd) {\r\n\t\t\t\tlet videoAd = wx.createRewardedVideoAd({\r\n\t\t\t\t\tadUnitId: 'adunit-0cc4ea5c4452afef'\r\n\t\t\t\t})\r\n\t\t\t\tlet callBack = () => {\r\n\t\t\t\t\tvideoAd.offClose(callBack);\r\n\t\t\t\t\tif (typeof func1 == \"function\") func1();\r\n\t\t\t\t}\r\n\t\t\t\tvideoAd.load()\r\n\t\t\t\t\t.then(() => { videoAd.onClose(callBack); return videoAd.show() })\r\n\t\t\t\t\t.catch(err => { //fail\r\n\t\t\t\t\t\tif (typeof func2 == \"function\") func2();\r\n\t\t\t\t\t\tconsole.log(err.errMsg);\r\n\t\t\t\t\t})\r\n\t\t\t} else{\t//基础库低于2.0.4 || 关闭视频激励广告 fail\r\n\t\t\t\tif (typeof func2 == \"function\") func2();\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\t//非微信平台，success\r\n\t\t\tif (typeof func1 == \"function\") func1();\r\n\t\t}\r\n\t},\r\n}\r\nmodule.exports = self;\r\n"]}