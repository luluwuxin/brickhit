{"version":3,"sources":["../../../../../../assets/script/wx/ad/assets/script/wx/ad/ad.js"],"names":["config","require","self","postAdvert","cc","sys","platform","WECHAT_GAME","launcInfo","wx","getLaunchOptionsSync","appId","referrerInfo","getUserInfo","success","res","city","userInfo","gender","param2","deviceId","UID","fromAppid","console","log","util","urls","request","url","advert","data","header","method","fail","module","exports"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEA,IAAIC,OAAO,IAAX;;AAEA,IAAMC,aAAa,SAAbA,UAAa,GAAY;AAC3B,QAAGC,GAAGC,GAAH,CAAOC,QAAP,IAAmBF,GAAGC,GAAH,CAAOE,WAA7B,EAAyC;AACrC,YAAIC,YAAYC,GAAGC,oBAAH,EAAhB;AACA,YAAIC,QAAQ,EAAZ;AACA,YAAI,OAAQH,UAAUI,YAAlB,IAAmC,WAAvC,EAAoD,CACnD,CADD,MACO;AACHD,oBAAQH,UAAUI,YAAV,CAAuBD,KAA/B;AACH;AACDF,WAAGI,WAAH,CAAe;AACXC,qBAAS,iBAAUC,GAAV,EAAe;AACpB,oBAAIC,OAAOD,IAAIE,QAAJ,CAAaD,IAAxB;AACA,oBAAIE,SAASH,IAAIE,QAAJ,CAAaC,MAA1B;AACA,oBAAIC,SAAS;AACTC,8BAAUpB,OAAOqB,GADR;AAETC,+BAAWX,KAFF;AAGTO,4BAAQA,MAHC;AAITF,0BAAMA;AAJG,iBAAb;AAMAO,wBAAQC,GAAR,CAAYL,MAAZ;AACA,oBAAIf,GAAGC,GAAH,CAAOC,QAAP,IAAmBF,GAAGC,GAAH,CAAOE,WAA9B,EAA2C;AACvC,wBAAIkB,OAAOxB,QAAQ,eAAR,CAAX;AACA,wBAAIyB,OAAOzB,QAAQ,QAAR,EAAkByB,IAA7B;AACAD,yBAAKE,OAAL,CAAa;AACTC,6BAAKF,KAAKG,MADD;AAETC,8BAAMX,MAFG;AAGTY,gCAAQ,EAAE,gBAAgB,mCAAlB,EAHC;AAITC,gCAAQ,MAJC;AAKTlB,iCAAS,sBAAO;AACZS,oCAAQC,GAAR,CAAY,oBAAZ;AACH,yBAPQ;AAQTS,8BAAM,mBAAO;AACTV,oCAAQC,GAAR,CAAY,iBAAZ;AACH;AAVQ,qBAAb;AAYH;AACJ;AA3BU,SAAf;AA6BH;AACJ,CAtCD;;AAwCAU,OAAOC,OAAP,GAAiB;AACbhC,gBAAYA;AADC,CAAjB","file":"ad.js","sourceRoot":"../../../../../../assets/script/wx/ad","sourcesContent":["//import { format } from 'util';\r\n\r\n\r\nvar config = require('config')\r\n\r\nvar self = null;\r\n\r\nconst postAdvert = function () {\r\n    if(cc.sys.platform == cc.sys.WECHAT_GAME){\r\n        var launcInfo = wx.getLaunchOptionsSync();\r\n        var appId = \"\";\r\n        if (typeof (launcInfo.referrerInfo) == \"undefined\") {\r\n        } else {\r\n            appId = launcInfo.referrerInfo.appId;\r\n        }\r\n        wx.getUserInfo({\r\n            success: function (res) {\r\n                var city = res.userInfo.city;\r\n                var gender = res.userInfo.gender;\r\n                var param2 = {\r\n                    deviceId: config.UID,\r\n                    fromAppid: appId,\r\n                    gender: gender,\r\n                    city: city\r\n                }\r\n                console.log(param2);\r\n                if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n                    var util = require('../utils/util');\r\n                    var urls = require('config').urls\r\n                    util.request({\r\n                        url: urls.advert,\r\n                        data: param2,\r\n                        header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n                        method: 'POST',\r\n                        success: res => {\r\n                            console.log(\"postAdvert success\")\r\n                        },\r\n                        fail: res => {\r\n                            console.log(\"postAdvert fail\");\r\n                        },\r\n                    })\r\n                }\r\n            },\r\n        })\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    postAdvert: postAdvert\r\n}"]}