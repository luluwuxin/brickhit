{"version":3,"sources":["../../../../../assets/scripts/common/assets/scripts/common/VersionData.js"],"names":["common","require","Const","getVersionData","getStorageSync","version","setVersionData","val","setStorageSync","defaultData","VersionData","cc","Class","properties","versionStartSeconds","get","Date","parse","_data","timestamp","instance","data","self","window","undefined"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,QAAQD,QAAQ,OAAR,CAAZ;AACA,IAAIE,iBAAiB,SAAjBA,cAAiB;AAAA,WAASH,OAAOI,cAAP,CAAsBF,MAAMG,OAA5B,CAAT;AAAA,CAArB;AACA,IAAIC,iBAAiB,SAAjBA,cAAiB,CAACC,GAAD;AAAA,WAASP,OAAOQ,cAAP,CAAsBN,MAAMG,OAA5B,EAAqCE,GAArC,CAAT;AAAA,CAArB;AACA,IAAIE,cAAc,EAAlB;AACA,IAAIC,cAAcC,GAAGC,KAAH,CAAS;AACvBC,gBAAW;AACP;;AAEAC,6BAAoB;AAChBC,eADgB,iBACX;AACD,uBAAO,CAACC,KAAKC,KAAL,CAAW,IAAID,IAAJ,EAAX,IAAyB,KAAKE,KAAL,CAAWC,SAArC,IAAkD,IAAzD;AACH;AAHe;AAHb,KADY;AAUvBC,cAAU,oBAAU;AAChB,YAAIC,OAAOlB,gBAAX;AACA,YAAG,CAACkB,IAAJ,EAAS;AACL,iBAAKH,KAAL,GAAaT,WAAb;AACA,iBAAKS,KAAL,CAAWC,SAAX,GAAuBH,KAAKC,KAAL,CAAW,IAAID,IAAJ,EAAX,CAAvB;AACAV,2BAAe,KAAKY,KAApB;AACH,SAJD,MAKK,KAAKA,KAAL,GAAaG,IAAb;AACL;AACA,eAAO,IAAP;AACH;AApBsB,CAAT,CAAlB;AAsBA,IAAIC,IAAJ;;AAEA;AACAC,OAAOpB,cAAP,GAAwB,YAAM;AAC1B,QAAGmB,QAAQE,SAAX,EAAsB,OAAOF,IAAP;AACtBA,WAAO,IAAIZ,WAAJ,EAAP;AACA,WAAOY,KAAKF,QAAL,EAAP;AACH,CAJD","file":"VersionData.js","sourceRoot":"../../../../../assets/scripts/common","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\n\r\nvar common = require(\"Common\");\r\nvar Const = require(\"Const\");\r\nvar getVersionData = ()     =>common.getStorageSync(Const.version);\r\nvar setVersionData = (val)  =>common.setStorageSync(Const.version, val);\r\nlet defaultData = {};\r\nvar VersionData = cc.Class({\r\n    properties:{\r\n        //本地存储\r\n\r\n        versionStartSeconds:{\r\n            get(){\r\n                return (Date.parse(new Date()) - this._data.timestamp) / 1000;\r\n            },\r\n        },\r\n    },\r\n    instance: function(){\r\n        let data = getVersionData();\r\n        if(!data){\r\n            this._data = defaultData;\r\n            this._data.timestamp = Date.parse(new Date());\r\n            setVersionData(this._data);\r\n        }\r\n        else this._data = data;\r\n        //this._data = data ? data : defaultData;\r\n        return this;\r\n    },\r\n});\r\nvar self;\r\n\r\n//单例\r\nwindow.getVersionData = () => {\r\n    if(self != undefined) return self;\r\n    self = new VersionData();\r\n    return self.instance();\r\n};"]}