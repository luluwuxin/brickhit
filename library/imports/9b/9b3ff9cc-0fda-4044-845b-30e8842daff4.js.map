{"version":3,"sources":["../../../../../../assets/script/wx/hongbao/assets/script/wx/hongbao/hongbao.js"],"names":["urls","require","config","util","hongbao","loadHongbaoWidget","target","name","cc","loader","loadRes","Prefab","err","prefab","console","log","hongbaoWidget","instantiate","node","addChild","setPosition","p","active","createHongbao","_price","_num","url","param","money","peoplecount","type","blob","request","data","header","method","success","d","res","pay","fail","er","error","lingHongbao","_hongbaoId","_command","hongbaoId","command","getHongbaoInfo","getHongBaoGetInfos","getHongBaoSendInfos"],"mappings":"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AAA,OAoHVS,mBApHU,GAoHY,UAASN,UAAT,EAAqBC,QAArB,EAA8B;AACnD,QAAInB,MAAM1B,KAAKI,OAAL,GAAc,uBAAxB;AACA,QAAIuB,QAAQ,EAAZ;AAEAxB,SAAK6B,OAAL,CAAa;AACTN,WAAKA,GADI;AAETO,YAAMN,KAFG;AAGTS,eAAQ,sBAAK;AACTtB,gBAAQC,GAAR,CAAY,8BAAZ,EAA2CuB,GAA3C;AACA;AACA;AACA;AACH,OARQ;AASTE,YAAM,cAAUC,EAAV,EAAc;AAChB3B,gBAAQ4B,KAAR,CAAcD,EAAd;AACD;AAXM,KAAb;AAaD,GArIU;AAEZ;;AA8CC;;;AAwBF;;;AAsBI;;;AAqBJ;;;AAuBJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;kBA/QqBrC","file":"hongbao.js","sourceRoot":"../../../../../../assets/script/wx/hongbao","sourcesContent":["\r\nvar urls = require('config').urls\r\nvar config = require('config')\r\nvar util = require('../utils/util');\r\n\r\n//// 类版本 全局函数太多可以使用类版本\r\nexport default class hongbao {\r\n    // 类似构成函数\r\n    constructor(){\r\n  \r\n    }; \r\n     loadHongbaoWidget = function(target,name){\r\n        cc.loader.loadRes(\"wx/hongbao/hongbaoWidget\",cc.Prefab,function(err,prefab){\r\n                    console.log(prefab)\r\n                    var hongbaoWidget = cc.instantiate(prefab);\r\n                    target.node.addChild(hongbaoWidget);\r\n                    // //适配高 宽\r\n                    // var _size = hongbaoWidget.getContentSize();\r\n                    // var tagSize = target.node.getContentSize();\r\n                    // var scaleX = tagSize.width/_size.width;\r\n                    // var scaleY = tagSize.height/_size.height;\r\n                    // hongbaoWidget.setScale(scaleX,1)\r\n \r\n                    hongbaoWidget.setPosition(cc.p(0,0))\r\n                    hongbaoWidget.active = false;\r\n                    name = name || \"hongbaoWidget\";\r\n                    target[name] = hongbaoWidget;\r\n                })\r\n      };\r\n    \r\n     createHongbao = function(_price, _num){\r\n        var url = urls.hongbao +\"/create_hongbao\";\r\n        var param = {\r\n            money: _price,\r\n            peoplecount: _num,\r\n            type: 1,\r\n            blob: {\r\n            }\r\n          };\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n            method: 'POST',\r\n            success:res=>{\r\n                console.log(\"create_hongbao Success\")\r\n                var d = res.data;\r\n                console.log(d);\r\n                util.pay(_price/100, null, null, null);\r\n            },\r\n            fail: function (er) {\r\n                console.error(er);\r\n              }\r\n        })\r\n      };\r\n      \r\n      //领取红包\r\n       lingHongbao = function(_hongbaoId, _command){\r\n        var url = urls.hongbao +\"/ling_hongbao\";\r\n        var param = {\r\n            hongbaoId: _hongbaoId,\r\n            command: _command,\r\n          };\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n            method: 'POST',\r\n            success:res=>{\r\n                console.log(\"ling_hongbao Success\")\r\n                var d = res.data;\r\n                console.log(d);\r\n                //util.pay(_price/100, null, null, null);\r\n            },\r\n            fail: function (er) {\r\n                console.error(er);\r\n              }\r\n        })\r\n      };\r\n    \r\n    //查询某个红包信息\r\n       getHongbaoInfo = function(_hongbaoId, _command){\r\n        var url = urls.hongbao +\"/get_hongbaoInfo\";\r\n        var param = {\r\n            hongbaoId: _hongbaoId,\r\n            command: _command,\r\n          };\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            success:res=>{\r\n                console.log(\"get_hongbaoInfo Success\",res)\r\n                // var d = res.data;\r\n                // console.log(d);\r\n                // util.pay(_price/100, null, null, null);\r\n            },\r\n            fail: function (er) {\r\n                console.error(er);\r\n              }\r\n        })\r\n      };\r\n    \r\n        //查询所有领取的红包信息\r\n       getHongBaoGetInfos = function(_hongbaoId, _command){\r\n        var url = urls.hongbao +\"/get_HongBaoGetInfos\";\r\n        var param = { };\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            //header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n            //method: 'POST',\r\n            success:res=>{\r\n                console.log(\"get_HongBaoGetInfos Success\",res)\r\n                // var d = res.data;\r\n                // console.log(d);\r\n                // util.pay(_price/100, null, null, null);\r\n            },\r\n            fail: function (er) {\r\n                console.error(er);\r\n              }\r\n        })\r\n      };\r\n    \r\n    //查询所有创建的红包信息\r\n       getHongBaoSendInfos = function(_hongbaoId, _command){\r\n        var url = urls.hongbao +\"/get_HongBaoSendInfos\";\r\n        var param = {\r\n          };\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            success:res=>{\r\n                console.log(\"get_HongBaoSendInfos Success\",res)\r\n                // var d = res.data;\r\n                // console.log(d);\r\n                // util.pay(_price/100, null, null, null);\r\n            },\r\n            fail: function (er) {\r\n                console.error(er);\r\n              }\r\n        })\r\n      };\r\n}\r\n\r\n\r\n\r\n// const loadHongbaoWidget = function(target){\r\n//     cc.loader.loadRes(\"wx/hongbao/hongbaoWidget\",cc.Prefab,function(err,prefab){\r\n//                 console.log(prefab)\r\n//                 var hongbaoWidget = cc.instantiate(prefab);\r\n//                 target.node.addChild(hongbaoWidget);\r\n//                 hongbaoWidget.active = false;\r\n//                 target.hongbaoWidget = hongbaoWidget;\r\n//             })\r\n//   };\r\n\r\n// const createHongbao = function(_price, _num){\r\n//     var url = urls.hongbao +\"/create_hongbao\";\r\n//     var param = {\r\n//         money: _price,\r\n//         peoplecount: _num,\r\n//         type: 1,\r\n//         blob: {\r\n//         }\r\n//       };\r\n//     util.request({\r\n//         url: url,\r\n//         data: param,\r\n//         header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n//         method: 'POST',\r\n//         success:res=>{\r\n//             console.log(\"create_hongbao Success\")\r\n//             var d = res.data;\r\n//             console.log(d);\r\n//             util.pay(_price/100, null, null, null);\r\n//         },\r\n//         fail: function (er) {\r\n//             console.error(er);\r\n//           }\r\n//     })\r\n//   };\r\n  \r\n//   //领取红包\r\n//   const lingHongbao = function(_hongbaoId, _command){\r\n//     var url = urls.hongbao +\"/ling_hongbao\";\r\n//     var param = {\r\n//         hongbaoId: _hongbaoId,\r\n//         command: _command,\r\n//       };\r\n//     util.request({\r\n//         url: url,\r\n//         data: param,\r\n//         header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n//         method: 'POST',\r\n//         success:res=>{\r\n//             console.log(\"ling_hongbao Success\")\r\n//             var d = res.data;\r\n//             console.log(d);\r\n//             //util.pay(_price/100, null, null, null);\r\n//         },\r\n//         fail: function (er) {\r\n//             console.error(er);\r\n//           }\r\n//     })\r\n//   };\r\n\r\n// //查询某个红包信息\r\n//   const getHongbaoInfo = function(_hongbaoId, _command){\r\n//     var url = urls.hongbao +\"/get_hongbaoInfo\";\r\n//     var param = {\r\n//         hongbaoId: _hongbaoId,\r\n//         command: _command,\r\n//       };\r\n//     util.request({\r\n//         url: url,\r\n//         data: param,\r\n//         success:res=>{\r\n//             console.log(\"get_hongbaoInfo Success\",res)\r\n//             // var d = res.data;\r\n//             // console.log(d);\r\n//             // util.pay(_price/100, null, null, null);\r\n//         },\r\n//         fail: function (er) {\r\n//             console.error(er);\r\n//           }\r\n//     })\r\n//   };\r\n\r\n//     //查询所有领取的红包信息\r\n//   const getHongBaoGetInfos = function(_hongbaoId, _command){\r\n//     var url = urls.hongbao +\"/get_HongBaoGetInfos\";\r\n//     var param = { };\r\n//     util.request({\r\n//         url: url,\r\n//         data: param,\r\n//         //header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n//         //method: 'POST',\r\n//         success:res=>{\r\n//             console.log(\"get_HongBaoGetInfos Success\",res)\r\n//             // var d = res.data;\r\n//             // console.log(d);\r\n//             // util.pay(_price/100, null, null, null);\r\n//         },\r\n//         fail: function (er) {\r\n//             console.error(er);\r\n//           }\r\n//     })\r\n//   };\r\n\r\n// //查询所有创建的红包信息\r\n//   const getHongBaoSendInfos = function(_hongbaoId, _command){\r\n//     var url = urls.hongbao +\"/get_HongBaoSendInfos\";\r\n//     var param = {\r\n//       };\r\n//     util.request({\r\n//         url: url,\r\n//         data: param,\r\n//         success:res=>{\r\n//             console.log(\"get_HongBaoSendInfos Success\",res)\r\n//             // var d = res.data;\r\n//             // console.log(d);\r\n//             // util.pay(_price/100, null, null, null);\r\n//         },\r\n//         fail: function (er) {\r\n//             console.error(er);\r\n//           }\r\n//     })\r\n//   };\r\n\r\n//   module.exports = {\r\n//     loadHongbaoWidget:loadHongbaoWidget,\r\n//     createHongbao: createHongbao,\r\n//     lingHongbao: lingHongbao,\r\n//     getHongbaoInfo: getHongbaoInfo,\r\n//     getHongBaoGetInfos: getHongBaoGetInfos,\r\n//     getHongBaoSendInfos: getHongBaoSendInfos,\r\n  \r\n//   }"]}