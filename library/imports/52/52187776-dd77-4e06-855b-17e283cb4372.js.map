{"version":3,"sources":["../../../../../../assets/script/wx/rank/assets/script/wx/rank/item.js"],"names":["self","cc","Class","extends","Component","properties","image","default","type","Node","nameUser","score","onLoad","start","init","data","index","nameLabel","getComponent","Label","scoreLabel","sprite","Sprite","ranks","find","node","string","name","texture","portrait","split","loader","load","url","err","spriteFrame","SpriteFrame","setTexture"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,OAAO,IAAX;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,eAAM;AACFC,qBAAQ,IADN;AAEFC,kBAAKP,GAAGQ;AAFN,SAhBE;AAoBRC,kBAAS;AACLH,qBAAQ,IADH;AAELC,kBAAKP,GAAGQ;AAFH,SApBD;AAwBRE,eAAM;AACFJ,qBAAQ,IADN;AAEFC,kBAAKP,GAAGQ;AAFN;AAxBE,KAHP;;AAiCL;;AAEAG,UAnCK,oBAmCK;AACNZ,eAAO,IAAP;AACH,KArCI;AAuCLa,SAvCK,mBAuCI,CAER,CAzCI;AA0CLC,QA1CK,gBA0CAC,IA1CA,EA0CKC,KA1CL,EA0CW;AACZhB,eAAO,IAAP;AACA,YAAIiB,YAAYjB,KAAKU,QAAL,CAAcQ,YAAd,CAA2BjB,GAAGkB,KAA9B,CAAhB;AACA,YAAIC,aAAapB,KAAKW,KAAL,CAAWO,YAAX,CAAwBjB,GAAGkB,KAA3B,CAAjB;AACA,YAAIE,SAASrB,KAAKM,KAAL,CAAWY,YAAX,CAAwBjB,GAAGqB,MAA3B,CAAb;AACA,YAAIC,QAAQtB,GAAGuB,IAAH,CAAQ,MAAR,EAAexB,KAAKyB,IAApB,CAAZ;AACAF,gBAAQA,MAAML,YAAN,CAAmBjB,GAAGkB,KAAtB,CAAR;;AAEAI,cAAMG,MAAN,GAAeV,QAAQ,CAAvB;AACA;AACAC,kBAAUS,MAAV,GAAmBX,KAAKY,IAAL,IAAa,EAAhC;AACAP,mBAAWM,MAAX,GAAoBX,KAAKJ,KAAL,IAAc,CAAlC;;AAEA;AACA,YAAIiB,UAAUb,KAAKc,QAAnB;AACA,YAAI,CAACD,OAAL,EAAa;AACT;AACH;AACDA,kBAAUA,QAAQE,KAAR,CAAc,IAAd,EAAmB,CAAnB,CAAV;AACAF,kBAAUA,UAAU,KAApB;AACA3B,WAAG8B,MAAH,CAAUC,IAAV,CAAe,EAACC,KAAIL,OAAL,EAAcpB,MAAK,KAAnB,EAAf,EAAyC,UAAS0B,GAAT,EAAaN,OAAb,EAAqB;AAC1D;AACA,gBAAIO,cAAc,IAAIlC,GAAGmC,WAAP,EAAlB;AACAD,wBAAYE,UAAZ,CAAuBT,OAAvB;AACAP,mBAAOc,WAAP,GAAqBA,WAArB;AAEH,SAND;AAOH;;AAED;;AAvEK,CAAT","file":"item.js","sourceRoot":"../../../../../../assets/script/wx/rank","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\nvar self = null\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        image:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n        nameUser:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n        score:{\r\n            default:null,\r\n            type:cc.Node,\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        self = this;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n    init(data,index){\r\n        self = this;\r\n        var nameLabel = self.nameUser.getComponent(cc.Label)\r\n        var scoreLabel = self.score.getComponent(cc.Label)\r\n        var sprite = self.image.getComponent(cc.Sprite)\r\n        var ranks = cc.find(\"rank\",self.node)\r\n        ranks = ranks.getComponent(cc.Label)\r\n        \r\n        ranks.string = index + 4\r\n        //console.log(data)\r\n        nameLabel.string = data.name || \"\";\r\n        scoreLabel.string = data.score || 0 ;\r\n\r\n        //获取人物头像\r\n        var texture = data.portrait;\r\n        if (!texture){\r\n            return\r\n        }\r\n        texture = texture.split(\"/0\",1); \r\n        texture = texture + \"/64\";\r\n        cc.loader.load({url:texture, type:'png'},function(err,texture){\r\n            //console.log(\"loadUrl\",texture instanceof cc.Texture2D)\r\n            var spriteFrame = new cc.SpriteFrame();\r\n            spriteFrame.setTexture(texture)\r\n            sprite.spriteFrame = spriteFrame\r\n\r\n        })\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}