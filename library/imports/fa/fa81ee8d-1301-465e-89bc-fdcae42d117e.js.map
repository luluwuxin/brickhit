{"version":3,"sources":["../../../../../../assets/script/wx/global/assets/script/wx/global/global.js"],"names":["localStorage","require","Global","gameStartTimes","parseInt","cc","sys","getItem","enterGameRandStr","shareAssist","userDataInfo","setUserDataInfo","useData","getUserDataInfo","getUserDataInfoByName","name","setUserDataInfoByName","value","isWeekTime","_time","now","getTimestamp","weekTime","_weekTime","console","log","d","Date","setDate","getDate","timestamp","parse","d2","flyText","target","_text","color","strokeColor","time","textNode","Node","addComponent","Label","LabelOutline","setContentSize","text","getComponent","string","fontSize","lineHeight","overflow","Overflow","RESIZE_HEIGHT","textOutLine","width","addChild","anchor","getAnchorPoint","size","getContentSize","setPosition","x","y","height","fadeOut","move","moveBy","p","runAction","sequence","delayTime","spawn","callFunc","destroy","addStartGameTimes","num","setItem","getStartGameTimes","times","IsRepeatRandString","str","_string","strList","JSON","i","length","addRandString","Array","push","stringify","getEnterGameRandStr","setEnterGameRandStr","flag","getShareAssist","setShareAssist","getLowScoreTimes","getLocalStorage","setLowScoreTimes","setLocalStorage","getHeightScoreTimes","setHeightScoreTimes","module","exports"],"mappings":"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","file":"global.js","sourceRoot":"../../../../../../assets/script/wx/global","sourcesContent":["//var config  = require('config');\r\nvar localStorage = require('localStorage');\r\nvar Global = {\r\n    //记录游戏开始次数\r\n   gameStartTimes: parseInt( cc.sys.localStorage.getItem('GameStartTimes')) || 0,\r\n   //randStrList: cc.sys.localStorage.getItem(\"RandomString\"),\r\n   //好友助力 是否有 进入游戏随机字符串\r\n   enterGameRandStr: false,\r\n   // 游戏内 好友助力 \r\n   shareAssist: false,\r\n\r\n   //低分不复活 次数记录\r\n   //lowScoreTimes: parseInt(localStorage.getLocalStorage(\"lowScoreTimes\")) || 0,\r\n\r\n   userDataInfo : {},\r\n   setUserDataInfo : function(useData){\r\n        this.userDataInfo = useData;\r\n   },\r\n   //获得用户信息\r\n   getUserDataInfo : function(){\r\n       return this.userDataInfo;\r\n   },\r\n   //获得数据 by name\r\n   getUserDataInfoByName : function(name){\r\n        if(this.userDataInfo && this.userDataInfo[name]){\r\n            return this.userDataInfo[name]\r\n        }\r\n        return null;\r\n   },\r\n   //设置数据\r\n   setUserDataInfoByName : function(name,value){\r\n        this.userDataInfo[name] = value\r\n   },\r\n   /**\r\n    * 是否同一周？\r\n    */\r\n   isWeekTime : function (_time) {\r\n    _time = _time ||　0;\r\n    var now = this.getTimestamp();\r\n    var weekTime = now - (now - 316800) % 604800;\r\n    var _weekTime = _time - (_time- 316800)%604800;\r\n\r\n    console.log(\"timeTamp\",_weekTime,weekTime);\r\n    if(_time && _weekTime === weekTime){\r\n        return true;\r\n    }\r\n    return false;\r\n  },  \r\n  /**\r\n   * 获得时间戳\r\n   */\r\n  getTimestamp:function(){\r\n    var d = new Date();\r\n    d.setDate(d.getDate());\r\n    var timestamp = Date.parse(d);\r\n    var d2 = new Date(timestamp); \r\n    var now = timestamp/1000;\r\n    \r\n    return now;\r\n  },\r\n    /**\r\n     *  飘字\r\n     * @param {*} target \r\n     * @param {*} _text \r\n     * @param {*} color \r\n     * @param {*} strokeColor \r\n     */\r\n  flyText(target,_text,color,strokeColor,time){\r\n    var textNode = new cc.Node;\r\n    textNode.addComponent(cc.Label);\r\n    textNode.addComponent(cc.LabelOutline);\r\n    textNode.setContentSize(500,200);\r\n    var text = textNode.getComponent(cc.Label);\r\n    text.string = _text || \"\" ;//\"飘字\";\r\n    text.fontSize = 40;\r\n    text.lineHeight = 40;\r\n    text.overflow = cc.Label.Overflow.RESIZE_HEIGHT;\r\n    textNode.color = color || cc.color(247,255,43,255);\r\n    var textOutLine = textNode.getComponent(cc.LabelOutline);\r\n    textOutLine.color = strokeColor || cc.color(63,2,2,255);\r\n    textOutLine.width = 2;\r\n    target.addChild(textNode);\r\n    var anchor = target.getAnchorPoint();\r\n    var size = target.getContentSize();\r\n    textNode.setPosition((0.5- anchor.x)*size.width/2, (0.5 -anchor.y)*size.height);\r\n\r\n    var fadeOut = cc.fadeOut(0.2);\r\n    var move = cc.moveBy(0.2,cc.p(0,200));\r\n    time = time || 0.3;\r\n    textNode.runAction(cc.sequence(cc.delayTime(time), cc.spawn( fadeOut,move),cc.callFunc(function(){\r\n        textNode.destroy();\r\n    })))\r\n},\r\n    addStartGameTimes(num){\r\n        num = num || 1;\r\n        \r\n        this.gameStartTimes +=num;\r\n        cc.sys.localStorage.setItem('GameStartTimes',this.gameStartTimes);\r\n    },\r\n    getStartGameTimes(){\r\n        let times = cc.sys.localStorage.getItem('GameStartTimes');\r\n        if(!!!times){\r\n            cc.sys.localStorage.setItem('GameStartTimes',0);\r\n            this.gameStartTimes = 0\r\n        }else{\r\n            this.gameStartTimes = parseInt(times);\r\n        }\r\n        return this.gameStartTimes;\r\n    },\r\n    //是否是相同 随机串\r\n    IsRepeatRandString(str){\r\n        console.log(\"IsRepeatRandString\");\r\n        let _string = cc.sys.localStorage.getItem(\"RandomString\");\r\n        let strList = null;\r\n        if(!!!_string){\r\n            return  false;\r\n        }else{\r\n            strList = JSON.parse(_string);\r\n        }\r\n        console.log(_string);\r\n        for(let i = 0; i< strList.length; i ++){\r\n            if(str == strList[i]){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    addRandString(str){\r\n        let _string = cc.sys.localStorage.getItem(\"RandomString\");\r\n        let strList = null;\r\n        if(!!!_string){\r\n            strList = new Array();\r\n            strList.push(str);\r\n            cc.sys.localStorage.setItem(\"RandomString\",JSON.stringify(strList));\r\n        }else{\r\n            strList = JSON.parse(_string);\r\n            strList.push(str);\r\n            cc.sys.localStorage.setItem(\"RandomString\",JSON.stringify(strList));\r\n        }     \r\n    },\r\n    getEnterGameRandStr(){\r\n        return this.enterGameRandStr;\r\n    },\r\n    setEnterGameRandStr(flag){\r\n        this.enterGameRandStr = flag;\r\n    },\r\n    getShareAssist(){\r\n        return this.shareAssist;\r\n    },\r\n    setShareAssist(flag){\r\n        this.shareAssist = flag;\r\n    },\r\n    // 低分不复活 次数记录\r\n    getLowScoreTimes(){\r\n       let times =  parseInt(localStorage.getLocalStorage(\"lowScoreTimes\")) || 0;\r\n       return times;\r\n    },\r\n    setLowScoreTimes(){\r\n        let times =  parseInt(localStorage.getLocalStorage(\"lowScoreTimes\")) || 0;\r\n        localStorage.setLocalStorage(\"lowScoreTimes\",times+1);\r\n    },\r\n    // 高分分不复活 次数记录\r\n    getHeightScoreTimes(){\r\n        let times =  parseInt(localStorage.getLocalStorage(\"heightScoreTimes\")) || 0;\r\n        return times;\r\n     },\r\n     setHeightScoreTimes(){\r\n         let times =  parseInt(localStorage.getLocalStorage(\"heightScoreTimes\")) || 0;\r\n         localStorage.setLocalStorage(\"heightScoreTimes\",times+1);\r\n     },\r\n};\r\n\r\nmodule.exports = Global;"]}