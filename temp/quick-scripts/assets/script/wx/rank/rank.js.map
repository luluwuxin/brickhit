{"version":3,"sources":["rank.js"],"names":["urls","require","config","util","self","rank","loadRankWidget","target","name","cc","loader","loadRes","Prefab","err","prefab","rankWidget","instantiate","node","addChild","_size","getContentSize","tagSize","scaleX","width","scaleY","height","console","log","getScale","_scale","setScale","adapterHeight","setContentSize","widget","getComponent","Widget","setPosition","p","active","loadQunRankWidget","qunRankWidget","loadFriendRankWidget","isNeedSetContent","_widget","find","adapterHeightContent","_widgetSize","getFriendRank","callBack","url","user","param","request","data","method","success","res","getWorldRank","getRank","isWeek","_week","week","fail","getQunRank","groupid","getWeekRank","groupId"],"mappings":"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","file":"rank.js","sourceRoot":"../../../../../../assets/script/wx/rank","sourcesContent":["var urls = require('config').urls\r\nvar config = require('config')\r\nvar util = require('../utils/util');\r\n\r\n//// 类版本 全局函数太多可以使用类版本\r\nvar self = null;\r\nexport default class rank {\r\n    // 类似构成函数\r\n    constructor(){\r\n        self = this;\r\n    }; \r\n    /* *******添加rankLayer *******\r\n    **target为self（this）\r\n    **name 为你自己设置（默认rankWidget）\r\n    */\r\n    loadRankWidget = function(target,name){\r\n        cc.loader.loadRes(\"wx/rankRes/rankWidget\",cc.Prefab,function(err,prefab){\r\n                var rankWidget = cc.instantiate(prefab);\r\n                target.node.addChild(rankWidget);\r\n                //适配高 宽\r\n                var _size = rankWidget.getContentSize();\r\n                var tagSize = target.node.getContentSize();\r\n\r\n                var scaleX = tagSize.width/_size.width;\r\n                var scaleY = tagSize.height/_size.height;\r\n                console.log(\"rankWidget Size\",tagSize,_size,target.node.getScale(),);\r\n                if(scaleX || scaleY){\r\n                    var _scale = scaleX;\r\n                    if(scaleX > scaleY){\r\n                        _scale = scaleY;  \r\n                    }\r\n                    rankWidget.setScale(scaleX,scaleY);\r\n                    self.adapterHeight(\"top\",rankWidget,scaleX,scaleY,_scale);\r\n                    self.adapterHeight(\"rankScroll\",rankWidget,scaleX,scaleY,_scale,\"true\");\r\n                    self.adapterHeight(\"rankScroll2\",rankWidget,scaleX,scaleY,_scale,\"true\");\r\n                    // var top = cc.find(\"top\",rankWidget);\r\n                    // if(top){\r\n                    //     top.setScale(1/scaleX * _scale,1/scaleY *_scale);\r\n                    // }\r\n\r\n                    // var rankScroll2 = cc.find(\"rankScroll2\",rankWidget);\r\n                    // if(rankScroll2){\r\n                    //     rankScroll2.setScale(1/scaleX * _scale,1/scaleY *_scale);\r\n                    //     var scrollSize = rankScroll2.getContentSize();\r\n                    //     scrollSize.y = scrollSize.height*scaleY;\r\n                    //     rankScroll2.setContentSize(scrollSize.width,scrollSize.height);\r\n                    //     var _content = cc.find(\"viewport\",rankScroll2);\r\n                    //     var contentSize = _content.getContentSize();\r\n                    //     contentSize.y = contentSize.height*scaleY;\r\n                    //     _content.setContentSize(contentSize.width,contentSize.height);\r\n                    // }\r\n                    // var rankScroll = cc.find(\"rankScroll\",rankWidget);\r\n                    // if(rankScroll){\r\n                    //     rankScroll.setScale(1/scaleX * _scale,1/scaleY *_scale);\r\n                    // }\r\n                }else{\r\n                    rankWidget.setContentSize(tagSize.width,tagSize.height);  \r\n                }\r\n                \r\n                var widget= rankWidget.getComponent(cc.Widget);\r\n                widget.target = target.node;\r\n                rankWidget.setPosition(cc.p(0,0))\r\n                \r\n                rankWidget.active = false;\r\n                name = name || \"rankWidget\"\r\n                target[name] = rankWidget;\r\n            })\r\n    };\r\n    // 获取群排行榜\r\n    loadQunRankWidget = function(target,name){\r\n        cc.loader.loadRes(\"wx/rankRes/qunRank\",cc.Prefab,function(err,prefab){\r\n            \r\n                var qunRankWidget = cc.instantiate(prefab);\r\n                target.node.addChild(qunRankWidget);\r\n                //适配高 宽\r\n                var _size = qunRankWidget.getContentSize();\r\n                var tagSize = target.node.getContentSize();\r\n                var scaleX = tagSize.width/_size.width;\r\n                var scaleY = tagSize.height/_size.height;\r\n                if(scaleX  || scaleY ){\r\n                    var _scale = scaleX;\r\n                    if(scaleX > scaleY){\r\n                        _scale = scaleY;  \r\n                    }\r\n                    console.log(\"qunRankWidget\",scaleX,scaleY,_size,tagSize);\r\n                    qunRankWidget.setScale(scaleX,scaleY);\r\n                    self.adapterHeight(\"top\",qunRankWidget,scaleX,scaleY,_scale);\r\n                    self.adapterHeight(\"rankScroll\",qunRankWidget,scaleX,scaleY,_scale,\"true\");\r\n                    // var top = cc.find(\"top\",qunRankWidget);\r\n                    // if(top){\r\n                    //     top.setScale(1/scaleX * _scale,1/scaleY *_scale);\r\n                    // }\r\n                    // var rankScroll = cc.find(\"rankScroll\",qunRankWidget);\r\n                    // if(rankScroll){\r\n                    //     rankScroll.setScale(1/scaleX * _scale,1/scaleY *_scale);\r\n                    // }\r\n                }else{\r\n                    qunRankWidget.setContentSize(tagSize.width,tagSize.height); \r\n                }\r\n                \r\n                qunRankWidget.setPosition(cc.p(0,0))\r\n                \r\n                qunRankWidget.active = false;\r\n                name = name || \"qunRankWidget\"\r\n                target[name] = qunRankWidget;\r\n            })\r\n    };\r\n    loadFriendRankWidget = function(target,name){\r\n        cc.loader.loadRes(\"wx/rankRes/friendRank\",cc.Prefab,function(err,prefab){\r\n                var rankWidget = cc.instantiate(prefab);\r\n                target.node.addChild(rankWidget);\r\n                //适配高 宽\r\n                var _size = rankWidget.getContentSize();\r\n                var tagSize = target.node.getContentSize();\r\n\r\n                var scaleX = tagSize.width/_size.width;\r\n                var scaleY = tagSize.height/_size.height;\r\n                console.log(\"friendRank Size\",tagSize,_size,target.node.getScale(),);\r\n                if(scaleX || scaleY){\r\n                    var _scale = scaleX;\r\n                    if(scaleX > scaleY){\r\n                        _scale = scaleY;  \r\n                    }\r\n                    rankWidget.setScale(scaleX,scaleY);\r\n                    self.adapterHeight(\"top\",rankWidget,scaleX,scaleY,_scale);\r\n                    self.adapterHeight(\"myRankBg\",rankWidget,scaleX,scaleY,_scale);\r\n                    self.adapterHeight(\"rankSp\",rankWidget,scaleX,scaleY,_scale);                   \r\n\r\n                }else{\r\n                    rankWidget.setContentSize(tagSize.width,tagSize.height);  \r\n                }\r\n            \r\n                rankWidget.setPosition(cc.p(0,0))\r\n                \r\n                rankWidget.active = false;\r\n                name = name || \"friendRank\";\r\n                target[name] = rankWidget;\r\n            })\r\n    };\r\n    adapterHeight = function(name,widget,scaleX,scaleY,_scale,isNeedSetContent = false){\r\n        var _widget = cc.find(name,widget);\r\n        if(_widget){\r\n            _widget.setScale(1/scaleX * _scale,1/scaleY *_scale);\r\n            if(isNeedSetContent){\r\n                self.adapterHeightContent(name,widget,scaleX,scaleY,_scale);\r\n                self.adapterHeightContent(\"viewport\",_widget,scaleX,scaleY,_scale);             \r\n            }\r\n        }       \r\n    };\r\n    adapterHeightContent = function(name,widget,scaleX,scaleY,_scale){\r\n        var _widget = cc.find(name,widget);\r\n        if(_widget){\r\n            var _widgetSize = _widget.getContentSize();\r\n            _widgetSize.height = _widgetSize.height*scaleY/_scale;\r\n            _widget.setContentSize(_widgetSize.width,_widgetSize.height);\r\n        }                  \r\n    };\r\n    //获取好友rank\r\n    getFriendRank = function(callBack){\r\n        var url = urls.user +\"/friendrank\"\r\n        var param = {}//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'GET',\r\n            success:res=>{\r\n                //服务器存储的用户数据\r\n                console.log(res)\r\n                if (callBack && typeof callBack == 'function') callBack(res.data)\r\n            },\r\n        })\r\n    }\r\n    // 获取世界rank\r\n    getWorldRank = function(callBack){\r\n        var url = urls.user +\"/worldrank\"\r\n        var param = {}//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'GET',\r\n            success:res=>{\r\n                //服务器存储的用户数据\r\n                console.log(res)\r\n                if (callBack && typeof callBack == 'function') callBack(res.data)\r\n            },\r\n        })\r\n    }\r\n    // 获取rank  好友跟世界rank 一起\r\n    // 现在使用此方法（以上两种弃用）\r\n    // isWeek为true 就是获取周 排行\r\n    getRank = function(callBack, isWeek){\r\n        var url = urls.user +\"/rank\";\r\n        var _week = null;\r\n        if(isWeek){\r\n            _week = 'isweek';\r\n        }\r\n        var param = {\r\n            week:_week,\r\n        }//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'GET',\r\n            success:res=>{\r\n                //服务器存储的用户数据\r\n                if (callBack && typeof callBack == 'function') callBack(res.data)\r\n            },\r\n            fail:res=>{\r\n\r\n            },\r\n        })\r\n    }   \r\n    // 获取群排名 isWeek为true 就是获取周群 排行\r\n    getQunRank = function(groupid, callBack,isWeek){\r\n        var url = urls.user +\"/grouprank\";\r\n        var _week = null;\r\n        if(isWeek){\r\n            _week = 'isweek';\r\n        }\r\n        var param = {\r\n            groupid:groupid,\r\n            week:_week,\r\n        }//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'GET',\r\n            success:res=>{\r\n                //服务器存储的用户数据\r\n                if (callBack && typeof callBack == 'function') callBack(res.data)\r\n            },\r\n            fail:res=>{\r\n\r\n            },\r\n        })\r\n    } \r\n    // 获取周排名\r\n    getWeekRank = function(callBack,isWeek){\r\n        var url = urls.user +\"/rank\";\r\n        var _week = null;\r\n        if(isWeek){\r\n            _week = 'isweek';\r\n        }\r\n        var param = {\r\n            groupid:groupId,\r\n            week:_week,\r\n        }//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'GET',\r\n            success:res=>{\r\n                //服务器存储的用户数据\r\n                if (callBack && typeof callBack == 'function') callBack(res.data)\r\n            },\r\n            fail:res=>{\r\n\r\n            },\r\n        })\r\n    }\r\n};\r\n/////////////////////////////////////////////////////\r\n/////全局变量版本//////////////////////////////////\r\n//////////////////////////////////////////////////\r\n// const loadRankWidget = function(target){\r\n//     cc.loader.loadRes(\"wx/rankRes/rankWidget\",cc.Prefab,function(err,prefab){\r\n//                 console.log(prefab)\r\n//                 var rankWidget = cc.instantiate(prefab);\r\n//                 target.node.addChild(rankWidget);\r\n//                 rankWidget.active = false;\r\n//                 target.rankWidget = rankWidget;\r\n//             })\r\n//   };\r\n//   const getFriendRank = function(callBack){\r\n//     var url = urls.user +\"/friendrank\"\r\n//     var param = {}//config.getParam();\r\n//     util.request({\r\n//         url: url,\r\n//         data: param,\r\n//         method: 'GET',\r\n//         success:res=>{\r\n//             //服务器存储的用户数据\r\n//             console.log(res)\r\n//             if (callBack && typeof callBack == 'function') callBack(res.data)\r\n//         },\r\n//     })\r\n// }\r\n\r\n// const getWorldRank = function(callBack){\r\n//     var url = urls.user +\"/worldrank\"\r\n//     var param = {}//config.getParam();\r\n//     util.request({\r\n//         url: url,\r\n//         data: param,\r\n//         method: 'GET',\r\n//         success:res=>{\r\n//             //服务器存储的用户数据\r\n//             console.log(res)\r\n//             if (callBack && typeof callBack == 'function') callBack(res.data)\r\n//         },\r\n//     })\r\n// }\r\n\r\n// const getRank = function(callBack){\r\n//   var url = urls.user +\"/rank\"\r\n//   var param = {}//config.getParam();\r\n//   util.request({\r\n//       url: url,\r\n//       data: param,\r\n//       method: 'GET',\r\n//       success:res=>{\r\n//           //服务器存储的用户数据\r\n//           console.log(res)\r\n//           if (callBack && typeof callBack == 'function') callBack(res.data)\r\n//       },\r\n//       fail:res=>{\r\n\r\n//       },\r\n//   })\r\n// }\r\n\r\n//   module.exports = {\r\n//     loadRankWidget: loadRankWidget,\r\n//     getFriendRank:getFriendRank,\r\n//     getWorldRank:getWorldRank,  \r\n//     getRank:getRank,\r\n//   }\r\n\r\n"]}