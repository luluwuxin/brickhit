{"version":3,"sources":["myAssist.js"],"names":["self","myAssist","cc","Class","statics","instance","getInstance","ctor","_loadMyssistWidget","callBack","loader","loadRes","Prefab","err","prefab","_myAssistWidgetPrefab","loadMyAssistWidget","target","name","rankWidget","instantiate","node","addChild","_size","getContentSize","tagSize","scaleX","width","scaleY","height","_scale","setScale","adapterHeight","setContentSize","setPosition","p","active","loadAssistLayerTwo","widget","isNeedSetContent","_widget","find","adapterHeightContent","_widgetSize"],"mappings":"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","file":"myAssist.js","sourceRoot":"../../../../../../assets/script/wx/myAssist","sourcesContent":["var self = null;\r\nvar myAssist = cc.Class({\r\n    statics: {\r\n        instance: null,\r\n        getInstance: function () {\r\n            if (myAssist.instance == null) {\r\n                myAssist.instance = new myAssist();\r\n            }\r\n            return myAssist.instance;\r\n        }\r\n    },\r\n\r\n    ctor: function () {\r\n        self = this;\r\n        //this._loadMyssistWidget();\r\n    },\r\n    _loadMyssistWidget(callBack){\r\n        cc.loader.loadRes(\"wx/myAssit/assistWiiget\",cc.Prefab,function(err,prefab){\r\n            self._myAssistWidgetPrefab = prefab;\r\n            if(callBack){\r\n                callBack();\r\n            }\r\n        })\r\n    },\r\n    loadMyAssistWidget : function(target,name){\r\n        cc.loader.loadRes(\"wx/myAssit/assistWiiget\",cc.Prefab,function(err,prefab){\r\n                var rankWidget = cc.instantiate(prefab);\r\n                target.node.addChild(rankWidget);\r\n                //适配高 宽\r\n                var _size = rankWidget.getContentSize();\r\n                var tagSize = target.node.getContentSize();\r\n\r\n                var scaleX = tagSize.width/_size.width;\r\n                var scaleY = tagSize.height/_size.height;\r\n                if(scaleX || scaleY){\r\n                    var _scale = scaleX;\r\n                    if(scaleX > scaleY){\r\n                        _scale = scaleY;  \r\n                    }\r\n                    rankWidget.setScale(scaleX,scaleY);\r\n                    self.adapterHeight(\"ui\",rankWidget,scaleX,scaleY,_scale);\r\n                    // self.adapterHeight(\"myRankBg\",rankWidget,scaleX,scaleY,_scale);\r\n                    // self.adapterHeight(\"rankSp\",rankWidget,scaleX,scaleY,_scale);                   \r\n\r\n                }else{\r\n                    rankWidget.setContentSize(tagSize.width,tagSize.height);  \r\n                }\r\n            \r\n                rankWidget.setPosition(cc.p(0,0))\r\n                \r\n                rankWidget.active = false;\r\n                name = name || \"myAssistWidget\";\r\n                target[name] = rankWidget;\r\n            // var loadFunc = function(){\r\n            //     var rankWidget = cc.instantiate(self._myAssistWidgetPrefab);\r\n            //     target.node.addChild(rankWidget);\r\n            //     //适配高 宽\r\n            //     var _size = rankWidget.getContentSize();\r\n            //     var tagSize = target.node.getContentSize();\r\n\r\n            //     var scaleX = tagSize.width/_size.width;\r\n            //     var scaleY = tagSize.height/_size.height;\r\n            //     if(scaleX || scaleY){\r\n            //         var _scale = scaleX;\r\n            //         if(scaleX > scaleY){\r\n            //             _scale = scaleY;  \r\n            //         }\r\n            //         rankWidget.setScale(scaleX,scaleY);\r\n            //         // self.adapterHeight(\"top\",rankWidget,scaleX,scaleY,_scale);\r\n            //         // self.adapterHeight(\"myRankBg\",rankWidget,scaleX,scaleY,_scale);\r\n            //         // self.adapterHeight(\"rankSp\",rankWidget,scaleX,scaleY,_scale);                   \r\n\r\n            //     }else{\r\n            //         rankWidget.setContentSize(tagSize.width,tagSize.height);  \r\n            //     }\r\n            \r\n            //     rankWidget.setPosition(cc.p(0,0))\r\n                \r\n            //     rankWidget.active = false;\r\n            //     name = name || \"myAssistWidget\";\r\n            //     target[name] = rankWidget;\r\n            // }\r\n            // if(!!!self._myAssistWidgetPrefab){\r\n            //     self._loadMyssistWidget(loadFunc); \r\n            // }else{\r\n            //     loadFunc();\r\n            // }\r\n\r\n        })\r\n    },\r\n    loadAssistLayerTwo : function(target,name){\r\n        cc.loader.loadRes(\"wx/myAssit/assistLayerTwo\",cc.Prefab,function(err,prefab){\r\n                var rankWidget = cc.instantiate(prefab);\r\n                target.node.addChild(rankWidget);\r\n                //适配高 宽\r\n                var _size = rankWidget.getContentSize();\r\n                var tagSize = target.node.getContentSize();\r\n\r\n                var scaleX = tagSize.width/_size.width;\r\n                var scaleY = tagSize.height/_size.height;\r\n                if(scaleX || scaleY){\r\n                    var _scale = scaleX;\r\n                    if(scaleX > scaleY){\r\n                        _scale = scaleY;  \r\n                    }\r\n                    rankWidget.setScale(scaleX,scaleY);\r\n                    self.adapterHeight(\"ui\",rankWidget,scaleX,scaleY,_scale);\r\n                    // self.adapterHeight(\"myRankBg\",rankWidget,scaleX,scaleY,_scale);\r\n                    // self.adapterHeight(\"rankSp\",rankWidget,scaleX,scaleY,_scale);                   \r\n\r\n                }else{\r\n                    rankWidget.setContentSize(tagSize.width,tagSize.height);  \r\n                }\r\n            \r\n                rankWidget.setPosition(cc.p(0,0))\r\n                \r\n                rankWidget.active = false;\r\n                name = name || \"assistLayerTwo\";\r\n                target[name] = rankWidget;\r\n\r\n        })\r\n    },\r\n    adapterHeight : function(name,widget,scaleX,scaleY,_scale,isNeedSetContent = false){\r\n        var _widget = cc.find(name,widget);\r\n        if(_widget){\r\n            _widget.setScale(1/scaleX * _scale,1/scaleY *_scale);\r\n            if(isNeedSetContent){\r\n                self.adapterHeightContent(name,widget,scaleX,scaleY,_scale);\r\n                self.adapterHeightContent(\"viewport\",_widget,scaleX,scaleY,_scale);             \r\n            }\r\n        }       \r\n    },\r\n    adapterHeightContent : function(name,widget,scaleX,scaleY,_scale){\r\n        var _widget = cc.find(name,widget);\r\n        if(_widget){\r\n            var _widgetSize = _widget.getContentSize();\r\n            _widgetSize.height = _widgetSize.height*scaleY/_scale;\r\n            _widget.setContentSize(_widgetSize.width,_widgetSize.height);\r\n        }                  \r\n    },\r\n})"]}