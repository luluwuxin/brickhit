{"version":3,"sources":["userOperate.js"],"names":["global","require","urls","config","util","self","userOperate","setScore","_score","gamecenter_link","_setStorageScore","score","getUserDataInfoByName","_setScore","setFriendsRankScore","cc","sys","localStorage","getItem","parseInt","setItem","setUserDataInfoByName","timetamp","isWeekTime","_storageScore","__setStorage","dataName","setWeek","url","user","param","request","data","header","method","success","console","log","res","platform","WECHAT_GAME","weekScore","time","getTimestamp","_kvData","Array","toString","push","key","value","wx","setUserCloudStorage","KVDataList","fail","setLocalScore","_localScore","getLocalScore","getScore","setBlob","blob","callBack","setUserInfo","userInfo","avatarUrl","nickName","city","subVit","_num","num","er","error","setWeekScore","getUserData","setUserDataInfo","getTuiguangUrl","getVit","__score"],"mappings":"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","file":"userOperate.js","sourceRoot":"../../../../../../assets/script/wx/userOperate","sourcesContent":["///////////////////////////////////////////\r\n//定义 用户操作  上传数据或拉取数据\r\n/////////////////////////////////////////////\r\nvar global = require('../global/global');\r\nvar urls = require('config').urls\r\nvar config = require('config')\r\nvar util = require('../utils/util');\r\n\r\n//// 类版本 全局函数太多可以使用类版本\r\nvar self = null;\r\nexport default class userOperate {\r\n  // 类似构成函数\r\n  constructor(){\r\n    self  = this;\r\n\r\n  }; \r\n  \r\n    // 上传 分数\r\n    setScore = function(_score){\r\n        if(!!!config.gamecenter_link){\r\n            this._setStorageScore(_score);\r\n            return;\r\n        }\r\n        var score = global.getUserDataInfoByName('score');\r\n        if(!!!score || score < _score){\r\n            this._setScore(_score);\r\n        }\r\n        var score = global.getUserDataInfoByName('weekScore');\r\n        if(!!!score || score < _score){\r\n            this._setScore(_score,\"weekScore\",\"set_week_score\");\r\n            this.setFriendsRankScore(_score);\r\n        }\r\n    }\r\n    /**\r\n     * 设置本地分数问题\r\n     */\r\n    _setStorageScore = function(_score){\r\n        var score = cc.sys.localStorage.getItem('score');\r\n        if(!!!score || parseInt(score) < _score){\r\n            cc.sys.localStorage.setItem('score',score);\r\n            global.setUserDataInfoByName('score',_score);\r\n        }\r\n        var timetamp = cc.sys.localStorage.getItem('timetamp');\r\n        if(timetamp){\r\n            if(global.isWeekTime(timetamp) ){\r\n                var _storageScore = cc.sys.localStorage.getItem('weekScore');\r\n                if(!!!_storageScore || parseInt( _storageScore ) < _score){\r\n                    this.__setStorage(_score);\r\n                }                 \r\n            }else{\r\n                this.__setStorage(_score);   \r\n            }\r\n        }else{\r\n            this.__setStorage(_score);\r\n        }\r\n\r\n    }\r\n    __setStorage(__score){\r\n        console.log(\"__SetStorage\",__score);\r\n        cc.sys.localStorage.setItem('weekScore',__score);\r\n        global.setUserDataInfoByName('weekScore',parseInt(__score));\r\n        var time = global.getTimestamp();\r\n        cc.sys.localStorage.setItem('timetamp',time);\r\n        this.setFriendsRankScore(__score);\r\n    }\r\n    _setScore  = function(_score,dataName = \"score\", setWeek = \"set_score\"){\r\n        var url = urls.user +\"/\"+setWeek;\r\n        var param = {}//config.getParam();\r\n        param[\"score\"] = _score;\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n            method: 'POST',\r\n            success:res=>{\r\n                console.log(\"setScore Success\",res)\r\n                global.setUserDataInfoByName(dataName,_score);\r\n\r\n            }\r\n        })       \r\n    }\r\n    /**\r\n     * 设置真实好友分数\r\n     */\r\n    setFriendsRankScore = function(score){\r\n\r\n        if (cc.sys.platform == cc.sys.WECHAT_GAME) {\r\n             var weekScore = global.getUserDataInfoByName('weekScore');\r\n             if(!!!weekScore || weekScore <= score){\r\n                var time = global.getTimestamp();\r\n                var _kvData = new Array();\r\n                score = score.toString();\r\n                time = time.toString();\r\n                _kvData.push({key:'score',value:score},{key:'timestamp',value : time});\r\n                wx.setUserCloudStorage({\r\n                    KVDataList:_kvData,\r\n                    success:res=>{\r\n                        console.log(res);\r\n                        global.setUserDataInfoByName('weekScore',parseInt(score));\r\n                    },\r\n                    fail:res=>{\r\n                        console.log(\"fail\",res);\r\n                    }\r\n                })\r\n            }\r\n        }    \r\n    }\r\n    //当局本地分数\r\n    setLocalScore = function(score){\r\n        this._localScore = score;\r\n    }\r\n\r\n    getLocalScore = function(){\r\n        return this._localScore || 0;\r\n    }\r\n\r\n    getScore = function(){\r\n        var score = 0\r\n        if(!!!config.gamecenter_link){\r\n            var timetamp = cc.sys.localStorage.getItem('timetamp');\r\n            if(timetamp){\r\n                if(global.isWeekTime(timetamp) ){\r\n                    var _storageScore = cc.sys.localStorage.getItem('weekScore');\r\n                    if(_storageScore){\r\n                        score = _storageScore;\r\n                    }                 \r\n                }\r\n            }   \r\n        }else{\r\n            score = global.getUserDataInfoByName('weekScore') || 0;   \r\n        } \r\n        return score;       \r\n    }\r\n    /** \r\n     * 上传 个人数据（自定义）\r\n     * \r\n     * */\r\n    setBlob = function(blob,callBack){\r\n        var url = urls.user +\"/set_blob\"\r\n        var param = {}//config.getParam();\r\n        param[\"blob\"] = blob;\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n            method: 'POST',\r\n            success:res=>{\r\n                console.log(\"setBlob Success\",res)              \r\n                if (callBack && typeof callBack == 'function') callBack()\r\n            }\r\n        })\r\n    }\r\n    \r\n    /**\r\n    * 上传个人人物数据信息 \r\n    *\r\n    */\r\n\r\n    setUserInfo = function(){\r\n        var url = urls.user +\"/setuserinfo\";\r\n        var param = {};//config.getParam();\r\n        console.log(config.userInfo)\r\n        param[\"portrait\"] = config.userInfo.avatarUrl\r\n        param[\"name\"] = config.userInfo.nickName\r\n        param[\"geo\"] = config.userInfo.city\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n            method: 'POST',\r\n        })\r\n    }\r\n    /**\r\n     * 消耗体力\r\n     */\r\n    subVit = function(callBack,_num){\r\n        var url = urls.user +\"/sub_vit\";\r\n        var param = {\r\n            num:_num,\r\n        };//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n            method: 'POST',\r\n            success:res=>{\r\n                if (callBack && typeof callBack == 'function') callBack(res.data.data)\r\n            },\r\n            fail: function (er) {\r\n                console.error(er);\r\n              }\r\n        })      \r\n    }\r\n    /*\r\n    *上传周分数\r\n    set_week_score\r\n    */ \r\n    setWeekScore = function(callBack,_num){\r\n        var url = urls.user +\"/set_week_score\";\r\n        var param = {\r\n            num:_num,\r\n        };//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            header: { 'content-type': 'application/x-www-form-urlencoded' },\r\n            method: 'POST',\r\n            success:res=>{\r\n                console.log(res.data);\r\n                if (callBack && typeof callBack == 'function') callBack(res.data.data)\r\n            },\r\n            fail: function (er) {\r\n                console.error(er);\r\n              }\r\n        })       \r\n    }\r\n    // 获取 用户信息 \r\n    /*res.data{\r\n    \"user\": {\r\n        \"uid\": \"String\",\r\n        \"name\": \"String\",\r\n\r\n        \"portrait\":\"String\",\r\n        \"geo\":\"String\",\r\n        \r\n        \"blob\": {\r\n            \"type\": \"Mixed\",\r\n            \"default\": {}\r\n        },\r\n        \"score\": {\r\n            \"type\":\"Number\",\r\n            \"default\":0\r\n        },\r\n        \"weekScore\": {\r\n            \"type\":\"Number\",\r\n            \"default\":0\r\n        },\r\n        \"weekTime\": {\r\n            \"type\":\"Number\",\r\n            \"default\":0\r\n        },\r\n        \"vit\": {\r\n            \"type\":\"Number\",\r\n            \"default\":0\r\n        },\r\n        \"vitRecoverTime\": {\r\n            \"type\":\"Number\",\r\n            \"default\":0\r\n        },\r\n        \"money\": {\r\n            \"type\": \"Number\",\r\n            \"default\":0\r\n        },\r\n        \"getHongBaos\": {\r\n            \"type\": \"Object\",\r\n            \"default\": []\r\n        },\r\n        \"sendHongBaos\": {\r\n            \"type\": \"Object\",\r\n            \"default\": []\r\n        },\r\n        \"tuiguangToday\": {\r\n            \"type\": \"Object\",\r\n            \"default\": []\r\n        },\r\n        \"tuiguangScore\":{\r\n            \"type\":\"Number\",\r\n            \"default\":0\r\n        },\r\n        \"createdate\": \"Date\",\r\n        \"gold\": \"Number\",\r\n        \"match\": {\r\n            \"type\": \"Object\",\r\n            \"default\": []\r\n        }\r\n    },\r\n    }\r\n    */\r\n    getUserData = function(callBack){\r\n        var url = urls.user +\"/get_user\";\r\n        var param = {};//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'GET',\r\n            success:res=>{\r\n                //服务器存储的用户数据\r\n                console.log(\"getUserData\",res)\r\n                global.setUserDataInfo(res.data.data)\r\n                if (callBack && typeof callBack == 'function') callBack(res.data)\r\n            },\r\n        })\r\n    }\r\n    getTuiguangUrl = function(callBack){\r\n        var url = urls.user +\"/get_tuiguangUrl\"\r\n        var param = {}//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'GET',\r\n            success:res=>{\r\n                //服务器存储的用户数据\r\n                console.log(res)\r\n                if (callBack && typeof callBack == 'function') callBack(res.data)\r\n            },\r\n        })\r\n    } \r\n    //获得体力\r\n    getVit = function(callBack){\r\n        var url = urls.user +\"/get_vit\";\r\n        var param = {};//config.getParam();\r\n        util.request({\r\n            url: url,\r\n            data: param,\r\n            method: 'GET',\r\n            success:res=>{\r\n                //服务器存储的用户数据\r\n                if (callBack && typeof callBack == 'function') callBack(res.data.data)\r\n            },\r\n        })\r\n    }\r\n};\r\n"]}