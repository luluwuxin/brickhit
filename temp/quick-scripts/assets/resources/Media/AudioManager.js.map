{"version":3,"sources":["AudioManager.js"],"names":["name2idx","cc","Class","extends","Component","properties","sound","type","AudioClip","default","onLoad","busy","idx","window","audioManager","play","name","free","getUsrData","audioEngine","scheduleOnce","start"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,WAAW,EAAE,YAAY,CAAd,EAAiB,WAAW,CAA5B,EAA+B,WAAW,CAA1C,EAA6C,WAAW,CAAxD,EAAf;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,eAAO;AACHC,kBAAM,CAAEN,GAAGO,SAAL,CADH;AAEHC,qBAAS;AAFN;AAhBC,KAHP;;AAyBL;;AAEAC,YAAQ,kBAAW;AACf;AACA,aAAKC,IAAL,GAAY,KAAZ;AACA,aAAKC,GAAL,GAAW,CAAX;AACAC,eAAOC,YAAP,GAAsB,IAAtB;AACH,KAhCI;AAiCLC,UAAM,cAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AAAA;;AACxB,YAAI,CAACC,aAAaZ,KAAlB,EAAyB;;AAEzB,YAAG,CAACW,IAAJ,EAAU;AAAChB,eAAGkB,WAAH,CAAeJ,IAAf,CAAoB,KAAKT,KAAL,CAAWN,SAASgB,IAAT,CAAX,CAApB,EAAiD;AAAQ;;AAEpE,YAAG,KAAKL,IAAR,EAAc;AACdV,WAAGkB,WAAH,CAAeJ,IAAf,CAAoB,KAAKT,KAAL,CAAWN,SAASgB,IAAT,CAAX,CAApB;AACA,aAAKL,IAAL,GAAY,IAAZ;AACA,aAAKS,YAAL,CAAkB;AAAA,mBAAI,MAAKT,IAAL,GAAY,KAAhB;AAAA,SAAlB,EAAyC,IAAzC;AACA;AACH,KA3CI;AA4CLU,WAAO,iBAAW,CAEjB;;AAED;AAhDK,CAAT","file":"AudioManager.js","sourceRoot":"../../../../../assets/resources/Media","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\nlet name2idx = { \"hitBrick\": 0, \"hitBall\": 1, \"hitCoin\": 2, \"hitBoom\": 3, };\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        sound: {\r\n            type: [ cc.AudioClip ],\r\n            default: [],\r\n        },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad: function() {\r\n        //\r\n        this.busy = false;\r\n        this.idx = 0;\r\n        window.audioManager = this;\r\n    },\r\n    play: function (name, free) {\r\n        if (!getUsrData().sound) return;\r\n\r\n        if(!free) {cc.audioEngine.play(this.sound[name2idx[name]]); return;}\r\n\r\n        if(this.busy) return;\r\n        cc.audioEngine.play(this.sound[name2idx[name]]);\r\n        this.busy = true;\r\n        this.scheduleOnce(()=>this.busy = false, 0.07);\r\n        return;\r\n    },\r\n    start :function() {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}